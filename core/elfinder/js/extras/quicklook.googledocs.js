try{elFinder.prototype.commands.quicklook.plugins||(elFinder.prototype.commands.quicklook.plugins=[]),elFinder.prototype.commands.quicklook.plugins.push(function(a){var d=a.fm,e=a.preview;e.bind("update",function(f){var b=f.file,g,c;if(0===b.mime.indexOf("application/vnd.google-apps.")){if("1"==b.url)$('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+d.i18n("getLink")+'</button></div>').appendTo(a.info.find(".elfinder-quicklook-info")).on("click",function(){$(this).html('<span class="elfinder-info-spinner">');d.request({data:{cmd:"url",target:b.hash},preventDefault:!0}).always(function(){$(this).html("")}).done(function(c){var f=d.file(b.hash);a.value.url=f.url=c.url||"";a.value.url&&e.trigger($.Event("update",{file:a.value}))})});""!==b.url&&"1"!=b.url&&(f.stopImmediatePropagation(),e.one("change",function(){c.remove();g.off("load").remove()}),c=$('<div class="elfinder-quicklook-info-data"> Now loading...<span class="elfinder-info-spinner"></div>').appendTo(a.info.find(".elfinder-quicklook-info")),g=$('<iframe class="elfinder-quicklook-preview-iframe"/>').css("background-color","transparent").appendTo(e).on("load",function(){a.hideinfo();c.remove();$(this).css("background-color","#fff").show()}).attr("src",d.url(b.hash).replace("/edit","/embed")))}})})}catch(a){};